!function(){"use strict";var t={34827:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0;var r=o(n(73609));r.default.widget("IKS.hallowagtaillink",{options:{uuid:"",editable:null},populateToolbar:function(t){var e=this,n=function(){var t=e.options.editable.getSelection().commonAncestorContainer;return r.default(t).parents("a").get(0)},o=r.default('<span class="'+this.widgetName+'"></span>'),i=r.default("<span></span>");(i=i.hallobutton({uuid:e.options.uuid,editable:e.options.editable,label:"Add/Edit Link",icon:"icon-link",command:null,queryState:function(){return i.hallobutton("checked",!!n())}})).on("click",(function(){var t,o,i=window.chooserUrls.pageChooser,a={allow_external_link:!0,allow_email_link:!0,allow_phone_link:!0,allow_anchor_link:!0},l=n(),u=e.options.editable.getSelection();return l?(t=l.getAttribute("href"),parentPageId=l.getAttribute("data-parent-id"),o=l.getAttribute("data-linktype"),a.link_text=l.innerText,"page"===o&&parentPageId?i=window.chooserUrls.pageChooser+parentPageId.toString()+"/":t.startsWith("mailto:")?(i=window.chooserUrls.emailLinkChooser,t=t.replace("mailto:",""),a.link_url=t):t.startsWith("tel:")?(i=window.chooserUrls.phoneLinkChooser,t=t.replace("tel:",""),a.link_url=t):t.startsWith("#")?(i=window.chooserUrls.anchorLinkChooser,t=t.replace("#",""),a.link_url=t):o||(i=window.chooserUrls.externalLinkChooser,a.link_url=t)):u.collapsed||(a.link_text=u.toString()),ModalWorkflow({url:i,urlParams:a,onload:PAGE_CHOOSER_MODAL_ONLOAD_HANDLERS,responses:{pageChosen:function(t){var n,o;return l?(n=l,o=!0):u.collapsed?(n=document.createElement("a"),u.insertNode(n),o=!1):(n=document.createElement("a"),u.surroundContents(n),r.default("a[href]",n).each((function(){for(var t=this.parentNode;this.firstChild;)t.insertBefore(this.firstChild,this);t.removeChild(this)})),o=!0),n.setAttribute("href",t.url),t.id?(n.setAttribute("data-id",t.id),n.setAttribute("data-parent-id",t.parentId),n.setAttribute("data-linktype","page")):(n.removeAttribute("data-id"),n.removeAttribute("data-parent-id"),n.removeAttribute("data-linktype")),!t.prefer_this_title_as_link_text&&o||(n.innerText=t.title),e.options.editable.element.trigger("change")}}})})),o.append(i);var a=r.default("<span></span>");(a=a.hallobutton({uuid:e.options.uuid,editable:e.options.editable,label:"Remove Link",icon:"icon-chain-broken",command:null,queryState:function(){return n()?a.hallobutton("enable"):a.hallobutton("disable")}})).on("click",(function(){var t,o;n()&&((o=(t=rangy.getSelection()).getRangeAt(0)).setStartBefore(t.anchorNode.parentNode),o.setEndAfter(t.anchorNode.parentNode),t.setSingleRange(o,!1),document.execCommand("unlink"),e.options.editable.element.trigger("change"))})),o.append(a),o.hallobuttonset(),t.append(o)}})},73609:function(t){t.exports=jQuery}},e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,n),r.exports}n.m=t,n.x=function(){},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={846:0},e=[[34827,751],[90971,751]],o=function(){},r=function(r,i){for(var a,l,u=i[0],s=i[1],d=i[2],c=i[3],p=0,h=[];p<u.length;p++)l=u[p],n.o(t,l)&&t[l]&&h.push(t[l][0]),t[l]=0;for(a in s)n.o(s,a)&&(n.m[a]=s[a]);for(d&&d(n),r&&r(i);h.length;)h.shift()();return c&&e.push.apply(e,c),o()},i=self.webpackChunkwagtail=self.webpackChunkwagtail||[];function a(){for(var o,r=0;r<e.length;r++){for(var i=e[r],a=!0,l=1;l<i.length;l++){var u=i[l];0!==t[u]&&(a=!1)}a&&(e.splice(r--,1),o=n(n.s=i[0]))}return 0===e.length&&(n.x(),n.x=function(){}),o}i.forEach(r.bind(null,0)),i.push=r.bind(null,i.push.bind(i));var l=n.x;n.x=function(){return n.x=l||function(){},(o=a)()}}(),n.x()}();
//# sourceMappingURL=hallo-wagtaillink.js.map